<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G√°bor saj√°t szak√°csk√∂nyve 2026</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); min-height: 100vh; padding: 20px; }
        
        .container { max-width: 1200px; margin: 0 auto; }
        
        header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 40px 30px; border-radius: 15px; margin-bottom: 30px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        h1 { font-size: 2.8em; margin-bottom: 5px; }
        .subtitle { font-size: 1.1em; opacity: 0.95; }
        
        .loading { text-align: center; padding: 60px 20px; }
        .loading-spinner { display: inline-block; width: 40px; height: 40px; border: 4px solid #ddd; border-top: 4px solid #667eea; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .loading p { margin-top: 15px; color: #667eea; font-size: 1.1em; }
        
        .error { background: #fee; color: #c33; padding: 20px; border-radius: 10px; margin: 20px 0; border-left: 5px solid #c33; }
        
        .controls { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; }
        .control-section { background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .control-section h3 { margin-bottom: 15px; color: #333; font-size: 1.1em; }
        
        .search-box { width: 100%; padding: 14px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px; transition: border-color 0.3s; }
        .search-box:focus { outline: none; border-color: #667eea; background: #f0f4ff; }
        
        .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }
        label { display: flex; align-items: center; cursor: pointer; user-select: none; }
        label:hover { color: #667eea; }
        input[type="checkbox"] { margin-right: 8px; width: 18px; height: 18px; cursor: pointer; accent-color: #667eea; }
        
        .recipes { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 25px; }
        
        .recipe-card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.1); transition: all 0.3s ease; border: 2px solid transparent; }
        .recipe-card:hover { transform: translateY(-8px); box-shadow: 0 12px 30px rgba(0,0,0,0.15); border-color: #667eea; }
        
        .recipe-header { padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; cursor: pointer; display: flex; justify-content: space-between; align-items: flex-start; gap: 10px; }
        .recipe-header h3 { font-size: 1.15em; flex: 1; line-height: 1.3; }
        .recipe-header .toggle { font-size: 1.8em; flex-shrink: 0; }
        
        .recipe-content { padding: 20px; display: none; }
        .recipe-content.open { display: block; }
        
        .recipe-meta { margin: 12px 0; font-size: 0.95em; color: #555; }
        .recipe-meta strong { color: #333; }
        .recipe-link { color: #667eea; text-decoration: none; word-break: break-all; font-weight: 500; }
        .recipe-link:hover { text-decoration: underline; }
        
        .hashtags { margin: 15px 0; }
        .tag { display: inline-block; background: #e0e7ff; color: #667eea; padding: 5px 12px; border-radius: 20px; margin: 5px 5px 5px 0; font-size: 0.85em; font-weight: 500; }
        
        .ingredients { background: #f9fafb; padding: 16px; border-radius: 8px; margin: 15px 0; font-size: 0.95em; line-height: 1.7; color: #333; border-left: 4px solid #667eea; }
        
        .no-results { text-align: center; padding: 60px 20px; color: #999; background: white; border-radius: 10px; font-size: 1.1em; }
        
        .footer { text-align: center; margin-top: 40px; padding: 20px; color: #666; }
        .sync-status { display: inline-block; width: 10px; height: 10px; border-radius: 50%; background: #4caf50; margin-right: 5px; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        
        .recipe-count { text-align: center; padding: 20px; color: #667eea; font-weight: bold; }
        
        @media (max-width: 768px) {
            .controls { grid-template-columns: 1fr; }
            .recipes { grid-template-columns: 1fr; }
            header { padding: 25px 20px; }
            h1 { font-size: 1.8em; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üç≥ G√°bor saj√°t szak√°csk√∂nyve 2026</h1>
            <p class="subtitle">Sz≈±rhet≈ë receptek gy≈±jtem√©nye | Val√≥s idej≈± szinkroniz√°ci√≥</p>
        </header>
        
        <div id="loadingContainer" class="loading">
            <div class="loading-spinner"></div>
            <p>Receptek bet√∂lt√©se a Google Sheet-r≈ël...</p>
        </div>
        
        <div id="contentContainer" style="display: none;">
            <div class="controls">
                <div class="control-section">
                    <h3>üîç Keres√©s</h3>
                    <input type="text" id="searchInput" class="search-box" placeholder="Keres√©s receptn√©v vagy hozz√°val√≥ szerint...">
                </div>
                
                <div class="control-section">
                    <h3>üè∑Ô∏è Sz≈±r√©s hozz√°val√≥ alapj√°n</h3>
                    <div class="checkbox-group">
                        <label><input type="checkbox" name="filter" value="csirke"> üçó Csirke</label>
                        <label><input type="checkbox" name="filter" value="halak"> üêü Halak</label>
                        <label><input type="checkbox" name="filter" value="marha"> üêÆ Marha/Sert√©s</label>
                        <label><input type="checkbox" name="filter" value="tejtermekek"> ü•õ Tejterm√©kek</label>
                    </div>
                </div>
            </div>
            
            <div class="recipe-count" id="recipeCount">0 recept bet√∂ltve</div>
            
            <div id="recipesContainer" class="recipes"></div>
            <div id="noResults" class="no-results" style="display: none;">
                <p>üîé Nem tal√°ltam a keres√©snek megfelel≈ë receptet.</p>
            </div>
            
            <div class="footer">
                <div>
                    <span class="sync-status"></span>
                    Utolj√°ra friss√≠tve: <span id="syncTime">most</span>
                </div>
                <p style="margin-top: 10px; font-size: 0.85em;">
                    üí° A m√≥dos√≠t√°sok a Google Sheet-ben automatikusan megjelennek ezen az oldalon
                </p>
            </div>
        </div>
        
        <div id="errorContainer" style="display: none;"></div>
    </div>

    <script>
        const SHEET_ID = '1NCmfGRQnqnqm7ILqrd3ryE-F_2QegV10tJ6H9de37ek';
        const SHEET_GID = '617184698';
        const SHEET_URL = ''https://script.google.com/macros/s/AKfycbycRROSSMh4LOL75B0NkrG-5M2clu2zbw1OLi6jHGRf_Hb7npn-1IZK59Uvy6T/exec';


        
        let allRecipes = [];
        
        function parseCSV(csv) {
            const lines = csv.trim().split('\n');
            const recipes = [];
            
            for (let i = 1; i < lines.length; i++) {
                const line = lines[i];
                if (!line.trim()) continue;
                
                const cells = parseCSVLine(line);
                if (cells.length < 2 || !cells[0].trim()) continue;
                
                const recipe = {
                    name: cells[0]?.trim() || 'Ismeretlen',
                    url: cells[1]?.trim() || '',
                    platform: cells[2]?.trim() || 'Web',
                    cuisine: cells[5]?.trim() || '',
                    hashtags: cells[4]?.trim() || '',
                    ingredients: cells[6]?.trim() || 'Nincs le√≠r√°s',
                };
                
                const fullText = (recipe.name + ' ' + recipe.hashtags + ' ' + recipe.ingredients).toLowerCase();
                recipe.csirke = fullText.includes('csirk') || fullText.includes('üçó');
                recipe.halak = fullText.includes('hal') || fullText.includes('tengeri') || fullText.includes('üêü');
                recipe.marha = /sert√©s|marha|h√∫s|bacon|szalonna/i.test(fullText);
                recipe.tejtermekek = /sajt|tejsz√≠n|tej|joghurt|juht√∫r√≥/i.test(fullText);
                
                recipes.push(recipe);
            }
            
            return recipes;
        }
        
        function parseCSVLine(line) {
            const cells = [];
            let currentCell = '';
            let insideQuotes = false;
            
            for (let j = 0; j < line.length; j++) {
                const char = line[j];
                const nextChar = line[j + 1];
                
                if (char === '"') {
                    if (insideQuotes && nextChar === '"') {
                        currentCell += '"';
                        j++;
                    } else {
                        insideQuotes = !insideQuotes;
                    }
                } else if (char === ',' && !insideQuotes) {
                    cells.push(currentCell);
                    currentCell = '';
                } else {
                    currentCell += char;
                }
            }
            cells.push(currentCell);
            return cells;
        }
        
        async function loadRecipes() {
            try {
                const response = await fetch(SHEET_URL);
                if (!response.ok) throw new Error('Sheet el√©r√©si hiba');
                
                const csv = await response.text();
                allRecipes = parseCSV(csv);
                
                if (allRecipes.length === 0) throw new Error('Nincs recept az adatb√°zisban!');
                
                document.getElementById('loadingContainer').style.display = 'none';
                document.getElementById('contentContainer').style.display = 'block';
                document.getElementById('recipeCount').textContent = `${allRecipes.length} recept bet√∂ltve`;
                document.getElementById('syncTime').textContent = new Date().toLocaleTimeString('hu-HU');
                
                filterRecipes();
                
                setInterval(loadRecipes, 60000);
                
            } catch (error) {
                document.getElementById('loadingContainer').style.display = 'none';
                document.getElementById('errorContainer').style.display = 'block';
                document.getElementById('errorContainer').innerHTML = `
                    <div class="error">
                        <strong>‚ùå Hiba:</strong> ${error.message}<br>
                        <small>Ellen≈ërizd, hogy a Google Sheet nyilv√°nos-e!</small><br>
                        <button onclick="location.reload()" style="margin-top: 10px; padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer;">
                            √öjrapr√≥b√°l√°s
                        </button>
                    </div>
                `;
            }
        }
        
        function filterRecipes() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const selectedFilters = Array.from(document.querySelectorAll('input[name="filter"]:checked')).map(cb => cb.value);
            
            let filtered = allRecipes.filter(recipe => {
                const matchesSearch = recipe.name.toLowerCase().includes(searchTerm) || 
                                     recipe.ingredients.toLowerCase().includes(searchTerm);
                const matchesFilters = selectedFilters.length === 0 || 
                    selectedFilters.some(filter => recipe[filter]);
                return matchesSearch && matchesFilters;
            
